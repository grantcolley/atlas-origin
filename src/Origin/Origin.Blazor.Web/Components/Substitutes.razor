<FluentAccordion>
    <FluentAccordionItem Expanded=true>
        <HeadingTemplate>
            <FluentStack Orientation="Orientation.Horizontal">
                Substitutes
            </FluentStack>
        </HeadingTemplate>
        <ChildContent>

            <FluentButton IconStart="@(new Icons.Regular.Size16.Bookmark())" OnClick="@AddSubstitute" Style="margin: 3px">
                Add Substitute
            </FluentButton>

            @foreach (Origin.Core.Models.DocumentSubstitute substitute in DocumentConfig.Substitutes.OrderBy(s => s.Key))
            {
                <FluentStack Orientation="Orientation.Horizontal" Style="margin: 3px">
                    <FluentNumberField @bind-Value="substitute.DocumentSubstituteId" Label="Id" ReadOnly="true" Style="width: 70px" />
                    <FluentTextField Name="Code" @bind-Value="substitute.Key" Label="Key" ReadOnly="@(DocumentConfig.IsReadOnly)" />
                    <FluentTextField Name="Code" @bind-Value="substitute.Group" Label="Group" ReadOnly="@(DocumentConfig.IsReadOnly)" />
                    <FluentButton IconEnd="@(new Icons.Regular.Size16.Delete())" OnClick="@(() => RemoveSubstitute(substitute))" />
                    <FluentSpacer />
                </FluentStack>
            }

        </ChildContent>
    </FluentAccordionItem>
</FluentAccordion>

@code {
    [Parameter, EditorRequired]
    public DocumentConfig DocumentConfig { get; set; } = new();

    protected void AddSubstitute()
    {
        DocumentConfig.Substitutes.Add(new DocumentSubstitute());
    }

    protected void RemoveSubstitute(Origin.Core.Models.DocumentSubstitute substitute)
    {
        DocumentConfig.Substitutes.Remove(substitute);
    }
}